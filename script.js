
const obj = {
    Backquote: {"keyEn":"`", "keyRu":"ё", "keyShiftEn":"~", "keyShiftRu":"Ё"},
    Backslash: {"keyEn":"/", "keyRu":"&#92", "keyShiftEn":"|", "keyShiftRu":"/"},
    BracketLeft: {"keyEn":"[", "keyRu":"х", "keyShiftEn":"{", "keyShiftRu":"Х"},
    BracketRight: {"keyEn":"]", "keyRu":"ъ", "keyShiftEn":"}", "keyShiftRu":"Ъ"},
    Comma: {"keyEn":",", "keyRu":"б", "keyShiftEn":"<", "keyShiftRu":"Б"},
    Digit0: {"keyEn":"0", "keyRu":"0", "keyShiftEn":")", "keyShiftRu":")"},
    Digit1: {"keyEn":"1", "keyRu":"1", "keyShiftEn":"!", "keyShiftRu":"!"},
    Digit2: {"keyEn":"2", "keyRu":"2", "keyShiftEn":"@", "keyShiftRu":"\""},
    Digit3: {"keyEn":"3", "keyRu":"3", "keyShiftEn":"#", "keyShiftRu":"№"},
    Digit4: {"keyEn":"4", "keyRu":"4", "keyShiftEn":"$", "keyShiftRu":";"},
    Digit5: {"keyEn":"5", "keyRu":"5", "keyShiftEn":"%", "keyShiftRu":"%"},
    Digit6: {"keyEn":"6", "keyRu":"6", "keyShiftEn":"^", "keyShiftRu":":"},
    Digit7: {"keyEn":"7", "keyRu":"7", "keyShiftEn":"&", "keyShiftRu":"?"},
    Digit8: {"keyEn":"8", "keyRu":"8", "keyShiftEn":"*", "keyShiftRu":"*"},
    Digit9: {"keyEn":"9", "keyRu":"9", "keyShiftEn":"(", "keyShiftRu":"("},
    Enter: {"keyEn":"Enter", "keyRu":"Enter", "keyShiftEn":"Enter", "keyShiftRu":"Enter"},
    Equal: {"keyEn":"=", "keyRu":"=", "keyShiftEn":"+", "keyShiftRu":"+"},
    Backspace: {"keyEn":"Backspace", "keyRu":"Backspace", "keyShiftEn":"Backspace", "keyShiftRu":"Backspace"},
    Tab: {"keyEn":"Tab", "keyRu":"Tab", "keyShiftEn":"Tab", "keyShiftRu":"Tab"},
    ShiftLeft: {"keyEn":"Shift", "keyRu":"Shift", "keyShiftEn":"Shift", "keyShiftRu":"Shift"},
    ShiftRight: {"keyEn":"Shift", "keyRu":"Shift", "keyShiftEn":"Shift", "keyShiftRu":"Shift"},
    ControlLeft: {"keyEn":"Ctrl", "keyRu":"Ctrl", "keyShiftEn":"Ctrl", "keyShiftRu":"Ctrl"},
    ControlRight: {"keyEn":"Ctrl", "keyRu":"Ctrl", "keyShiftEn":"Ctrl", "keyShiftRu":"Ctrl"},
    AltLeft: {"keyEn":"Alt", "keyRu":"Alt", "keyShiftEn":"Alt", "keyShiftRu":"Alt"},
    AltRight: {"keyEn":"Alt", "keyRu":"Alt", "keyShiftEn":"Alt", "keyShiftRu":"Alt"},
    CapsLock: {"keyEn":"CapsLock", "keyRu":"CapsLock", "keyShiftEn":"CapsLock", "keyShiftRu":"CapsLock"},
    ArrowUp: {"keyEn":"&#9650", "keyRu":"&#9650", "keyShiftEn":"&#9650", "keyShiftRu":"&#9650"},
    ArrowRight: {"keyEn":"&#9658", "keyRu":"&#9658", "keyShiftEn":"&#9658", "keyShiftRu":"&#9658"},
    ArrowDown: {"keyEn":"&#9660", "keyRu":"&#9660", "keyShiftEn":"&#9660", "keyShiftRu":"&#9660"},
    ArrowLeft: {"keyEn":"&#9668", "keyRu":"&#9668", "keyShiftEn":"&#9668", "keyShiftRu":"&#9668"},
    MetaLeft: {"keyEn":"Win", "keyRu":"Win", "keyShiftEn":"Win", "keyShiftRu":"Win"},
    KeyA: {"keyEn":"a", "keyRu":"ф", "keyShiftEn":"A", "keyShiftRu":"Ф"},
    KeyB: {"keyEn":"b", "keyRu":"и", "keyShiftEn":"B", "keyShiftRu":"И"},
    KeyC: {"keyEn":"c", "keyRu":"с", "keyShiftEn":"C", "keyShiftRu":"С"},
    KeyD: {"keyEn":"d", "keyRu":"в", "keyShiftEn":"D", "keyShiftRu":"В"},
    KeyE: {"keyEn":"e", "keyRu":"у", "keyShiftEn":"E", "keyShiftRu":"У"},
    KeyF: {"keyEn":"f", "keyRu":"а", "keyShiftEn":"F", "keyShiftRu":"А"},
    KeyG: {"keyEn":"g", "keyRu":"п", "keyShiftEn":"G", "keyShiftRu":"П"},
    KeyH: {"keyEn":"h", "keyRu":"р", "keyShiftEn":"H", "keyShiftRu":"Р"},
    KeyI: {"keyEn":"i", "keyRu":"ш", "keyShiftEn":"I", "keyShiftRu":"Ш"},
    KeyJ: {"keyEn":"j", "keyRu":"о", "keyShiftEn":"J", "keyShiftRu":"О"},
    KeyK: {"keyEn":"k", "keyRu":"л", "keyShiftEn":"K", "keyShiftRu":"Л"},
    KeyL: {"keyEn":"l", "keyRu":"д", "keyShiftEn":"L", "keyShiftRu":"Д"},
    KeyM: {"keyEn":"m", "keyRu":"ь", "keyShiftEn":"M", "keyShiftRu":"Ь"},
    KeyN: {"keyEn":"n", "keyRu":"т", "keyShiftEn":"N", "keyShiftRu":"Т"},
    KeyO: {"keyEn":"o", "keyRu":"щ", "keyShiftEn":"O", "keyShiftRu":"Щ"},
    KeyP: {"keyEn":"p", "keyRu":"з", "keyShiftEn":"P", "keyShiftRu":"З"},
    KeyQ: {"keyEn":"q", "keyRu":"й", "keyShiftEn":"Q", "keyShiftRu":"Й"},
    KeyR: {"keyEn":"r", "keyRu":"к", "keyShiftEn":"R", "keyShiftRu":"К"},
    KeyS: {"keyEn":"s", "keyRu":"ы", "keyShiftEn":"S", "keyShiftRu":"Ы"},
    KeyT: {"keyEn":"t", "keyRu":"е", "keyShiftEn":"T", "keyShiftRu":"Е"},
    KeyU: {"keyEn":"u", "keyRu":"г", "keyShiftEn":"U", "keyShiftRu":"Г"},
    KeyV: {"keyEn":"v", "keyRu":"м", "keyShiftEn":"V", "keyShiftRu":"М"},
    KeyW: {"keyEn":"w", "keyRu":"ц", "keyShiftEn":"W", "keyShiftRu":"Ц"},
    KeyX: {"keyEn":"x", "keyRu":"ч", "keyShiftEn":"X", "keyShiftRu":"Ч"},
    KeyY: {"keyEn":"y", "keyRu":"н", "keyShiftEn":"Y", "keyShiftRu":"Н"},
    KeyZ: {"keyEn":"z", "keyRu":"я", "keyShiftEn":"Z", "keyShiftRu":"Я"},
    Minus: {"keyEn":"-", "keyRu":"-", "keyShiftEn":"_", "keyShiftRu":"_"},
    Period: {"keyEn":".", "keyRu":"ю", "keyShiftEn":">", "keyShiftRu":"Ю"},
    Quote: {"keyEn":"'", "keyRu":"э", "keyShiftEn":"\"", "keyShiftRu":"Э"},
    Semicolon: {"keyEn":";", "keyRu":"ж", "keyShiftEn":":", "keyShiftRu":"Ж"},
    Slash: {"keyEn":"/", "keyRu":".", "keyShiftEn":"?", "keyShiftRu":","},
    Space: {"keyEn":" ", "keyRu":" ", "keyShiftEn":" ", "keyShiftRu":" "}    
};

document.body.insertAdjacentHTML("afterbegin", `<h1>codejam-virtual-keyboard</h1>`);

document.body.insertAdjacentHTML("beforeend", `<div class="block_text"><textarea id="text"></textarea></div>`);

document.body.insertAdjacentHTML("beforeend", `<div class="block_keyboard">
<div class="block_keyboard--list1 list">
    <button type="button" value="Backquote"></button>
    <button type="button" value="Digit1"></button>
    <button type="button" value="Digit2"></button>
    <button type="button" value="Digit3"></button>
    <button type="button" value="Digit4"></button>
    <button type="button" value="Digit5"></button>
    <button type="button" value="Digit6"></button>
    <button type="button" value="Digit7"></button>
    <button type="button" value="Digit8"></button>
    <button type="button" value="Digit9"></button>
    <button type="button" value="Digit0"></button>
    <button type="button" value="Minus"></button>
    <button type="button" value="Equal"></button>
    <button type="button" value="Backspace"></button>
</div>
<div class="block_keyboard--list2 list">
    <button type="button" value="Tab"></button>
    <button type="button" value="KeyQ"></button>
    <button type="button" value="KeyW"></button>
    <button type="button" value="KeyE"></button>
    <button type="button" value="KeyR"></button>
    <button type="button" value="KeyT"></button>
    <button type="button" value="KeyY"></button>
    <button type="button" value="KeyU"></button>
    <button type="button" value="KeyI"></button>
    <button type="button" value="KeyO"></button>
    <button type="button" value="KeyP"></button>
    <button type="button" value="BracketLeft"></button>
    <button type="button" value="BracketRight"></button>
    <button type="button" value="Backslash"></button>
</div>
<div class="block_keyboard--list3 list">
    <button type="button" value="CapsLock"></button>
    <button type="button" value="KeyA"></button>
    <button type="button" value="KeyS"></button>
    <button type="button" value="KeyD"></button>
    <button type="button" value="KeyF"></button>
    <button type="button" value="KeyG"></button>
    <button type="button" value="KeyH"></button>
    <button type="button" value="KeyJ"></button>
    <button type="button" value="KeyK"></button>
    <button type="button" value="KeyL"></button>
    <button type="button" value="Semicolon"></button>
    <button type="button" value="Quote"></button>
    <button type="button" value="Enter"></button>
</div>
<div class="block_keyboard--list4 list">
    <button type="button" value="ShiftLeft"></button>
    <button id = "#flag" type="button" value="KeyZ"></button>
    <button type="button" value="KeyX"></button>
    <button type="button" value="KeyC"></button>
    <button type="button" value="KeyV"></button>
    <button type="button" value="KeyB"></button>
    <button type="button" value="KeyN"></button>
    <button type="button" value="KeyM"></button>
    <button type="button" value="Comma"></button>
    <button type="button" value="Period"></button>
    <button type="button" value="Slash"></button>
    <button type="button" value="ArrowUp"></button>
    <button type="button" value="ShiftRight"></button>
</div>
<div class="block_keyboard--list5 list">
    <button type="button" value="ControlLeft"></button>
    <button type="button" value="MetaLeft"></button>
    <button type="button" value="AltLeft"></button>
    <button type="button" value="Space"></button>
    <button type="button" value="AltRight"></button>
    <button type="button" value="ArrowLeft"></button>
    <button type="button" value="ArrowDown"></button>
    <button type="button" value="ArrowRight"></button>
    <button type="button" value="ControlRight"></button>
</div>
</div>`);

let language;
let caseType = 'lower';
let buttonCollection = document.getElementsByTagName("button");
let f = document.getElementById("#flag"); 

if (sessionStorage.getItem('language') === null || sessionStorage.getItem('language') === 'en') {
    sessionStorage.setItem('language', 'en');
    for(elem of buttonCollection) {
        if(obj[elem.value]["keyEn"].length !== 1) {
            elem.innerHTML = obj[elem.value]["keyShiftEn"];
        } else {
            elem.innerHTML = obj[elem.value]["keyEn"];
        }
    }
} else if (sessionStorage.getItem('language') === 'ru') {
    sessionStorage.setItem('language', 'ru');
    for(elem of buttonCollection) {
        if(obj[elem.value]["keyEn"].length !== 1) {
            elem.innerHTML = obj[elem.value]["keyShiftRu"];
        } else {
            elem.innerHTML = obj[elem.value]["keyRu"];
        }
    }
}
 
document.onkeydown = e => {
    e = e || window.event;
    if (e.key.length < 2 && e.shiftKey) {
        e.preventDefault();
        for (elem of buttonCollection) {
            if (e.code === elem.value) {
                if (caseType === 'lower') {
                    if (sessionStorage.getItem('language') === 'en') {
                        textarea.value += obj[elem.value]['keyShiftEn'];
                    } else if (sessionStorage.getItem('language') === 'ru') {
                        textarea.value += obj[elem.value]['keyShiftRu'];
                    }
                } else if(caseType === 'upper') {
                    if (sessionStorage.getItem('language') === 'en') {
                        if (elem.value.slice(0, 3) === "Key") {
                            textarea.value += obj[elem.value]['keyEn'];
                        } else  {
                            textarea.value += obj[elem.value]['keyShiftEn'];
                        }
                    } else if (sessionStorage.getItem('language') === 'ru') {
                        if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                            textarea.value += obj[elem.value]['keyRu'];
                        } else  {
                            textarea.value += obj[elem.value]['keyShiftRu'];
                        } 
                    }
                }
            }
        }
    }

    if (e.ctrlKey && e.altKey) {
        if (caseType === 'upper') {
            if (sessionStorage.getItem('language') === 'en') {
                sessionStorage.setItem('language', 'ru');
                for (elem of buttonCollection) {
                    if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                        elem.innerHTML = obj[elem.value]["keyShiftRu"];
                    } else  {
                        elem.innerHTML = obj[elem.value]["keyRu"];
                    }  
                }
            } else if (sessionStorage.getItem('language') === 'ru') {
                sessionStorage.setItem('language', 'en');
                for (elem of buttonCollection) {
                    if (elem.value.slice(0, 3) === "Key") {
                        elem.innerHTML = obj[elem.value]["keyShiftEn"];
                    } else  {
                        elem.innerHTML = obj[elem.value]["keyEn"];
                    }
                }
            }
        } else if (caseType === 'lower') {
            if (sessionStorage.getItem('language') === 'en') {
                sessionStorage.setItem('language', 'ru');
                for (elem of buttonCollection) {
                    elem.innerHTML = obj[elem.value]["keyRu"];
                }
            } else if (sessionStorage.getItem('language') === 'ru') {
                sessionStorage.setItem('language', 'en');
                for (elem of buttonCollection) {
                    elem.innerHTML = obj[elem.value]["keyEn"];
                }
            }
        }
    }
    
    for (let button of buttonCollection) {
        if (e.code === button.value) {
            if (button.value ==="Backspace") {
                e.preventDefault();
                textarea.value = textarea.value.slice(0, -1);
                return true;
            }
            if (button.value ==="Enter") {
                e.preventDefault();
                textarea.value += "\n";
                return true;
            }
            if (button.value ==="Tab") {
                e.preventDefault();
                textarea.value += "\t";
                return true;
            }
            if (["Ctrl", "Win"].includes(button.innerHTML)) {
                return true;
            }
            
            if (button.value ==="CapsLock") {
                e.preventDefault();
                if (button.classList.value === "") {
                    button.classList.add("focus_caps");
                } else if (button.classList.value === "focus_caps") {
                    button.classList.remove("focus_caps");
                }

                if (caseType === 'lower') {
                    caseType = 'upper';
                    if (sessionStorage.getItem('language') === 'en') {
                        for (elem of buttonCollection) {
                            if (elem.value.slice(0, 3) === "Key") {
                                elem.innerHTML = obj[elem.value]["keyShiftEn"];
                            } else  {
                                elem.innerHTML = obj[elem.value]["keyEn"];
                            }
                        }
                    } else if (sessionStorage.getItem('language') === 'ru') {
                        for (elem of buttonCollection) {
                            if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                                elem.innerHTML = obj[elem.value]["keyShiftRu"];
                            } else  {
                                elem.innerHTML = obj[elem.value]["keyRu"];
                            }    
                        }
                    }
                } else if (caseType === 'upper') {
                    caseType = 'lower';
                    if (sessionStorage.getItem('language') === 'en') {
                        for (elem of buttonCollection) {
                            elem.innerHTML = obj[elem.value]["keyEn"];
                        }
                    } else if (sessionStorage.getItem('language') === 'ru') {
                        for (elem of buttonCollection) {
                            elem.innerHTML = obj[elem.value]["keyRu"];
                        }
                    }
                }
                
                return true;
            }
       
            if (!e.shiftKey && !e.altKey) {
                e.preventDefault();
                textarea.value += button.innerHTML;
            }
        }
    }
    return true;
}

let textarea = document.getElementById("text");
textarea.focus();

textarea.addEventListener("blur", () => textarea.focus());

document.addEventListener("keydown", e => {
    e = e || window.event;
    for (let button of buttonCollection) {
        if (e.code === button.value) {
            button.classList.add("focus");
        }
    }
    if (e.key === "Shift") {
        e.preventDefault();
        if (caseType === 'lower') {

            if (sessionStorage.getItem('language') === 'en') {
                for(elem of buttonCollection) {
                    elem.innerHTML = obj[elem.value]["keyShiftEn"]; 
                }
            } else if (sessionStorage.getItem('language') === 'ru') {
                for(elem of buttonCollection) {
                    elem.innerHTML = obj[elem.value]["keyShiftRu"];
                }
            }
        } else if(caseType === 'upper') {
            if (sessionStorage.getItem('language') === 'en') {
                for (elem of buttonCollection) {
                    if (elem.value.slice(0, 3) === "Key") {
                        elem.innerHTML = obj[elem.value]["keyEn"];
                    } else  {
                        elem.innerHTML = obj[elem.value]["keyShiftEn"];
                    }
                }
            } else if (sessionStorage.getItem('language') === 'ru') {
                for (elem of buttonCollection) {
                    if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                        elem.innerHTML = obj[elem.value]["keyRu"];
                    } else  {
                        elem.innerHTML = obj[elem.value]["keyShiftRu"];
                    }    
                }
            }
        }
        
    }
    return true;
});

document.addEventListener("keyup", e => {
    e = e || window.event;
    for (let button of buttonCollection) {
        if (e.code === button.value) {
            button.classList.remove("focus");
        }
    }

    if (e.key === "Shift") {
        if (caseType === 'lower') {
            if (sessionStorage.getItem('language') === 'en') {
                for(elem of buttonCollection) {
                    elem.innerHTML = obj[elem.value]["keyEn"]; 
                }
            } else if (sessionStorage.getItem('language') === 'ru') {
                for(elem of buttonCollection) {
                    elem.innerHTML = obj[elem.value]["keyRu"]; 
                }
            }
        } else if (caseType === 'upper') {
            if (sessionStorage.getItem('language') === 'en') {
                for (elem of buttonCollection) {
                    if (elem.value.slice(0, 3) === "Key") {
                        elem.innerHTML = obj[elem.value]["keyShiftEn"];
                    } else  {
                        elem.innerHTML = obj[elem.value]["keyEn"];
                    }
                }
            } else if (sessionStorage.getItem('language') === 'ru') {
                for (elem of buttonCollection) {
                    if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                        elem.innerHTML = obj[elem.value]["keyShiftRu"];
                    } else  {
                        elem.innerHTML = obj[elem.value]["keyRu"];
                    }    
                }
            }
        }
        
    }
    return true;
});


let buttonClick = document.querySelectorAll("button");

buttonClick.forEach(button => {
    
    button.addEventListener("mousedown", () => {
        if (button.value === "ShiftLeft" || button.value === "ShiftRight") {
            if (caseType === 'lower') {

                if (sessionStorage.getItem('language') === 'en') {
                    for(elem of buttonCollection) {
                        elem.innerHTML = obj[elem.value]["keyShiftEn"]; 
                    }
                } else if (sessionStorage.getItem('language') === 'ru') {
                    for(elem of buttonCollection) {
                        elem.innerHTML = obj[elem.value]["keyShiftRu"];
                    }
                }
            } else if(caseType === 'upper') {
                if (sessionStorage.getItem('language') === 'en') {
                    for (elem of buttonCollection) {
                        if (elem.value.slice(0, 3) === "Key") {
                            elem.innerHTML = obj[elem.value]["keyEn"];
                        } else  {
                            elem.innerHTML = obj[elem.value]["keyShiftEn"];
                        }
                    }
                } else if (sessionStorage.getItem('language') === 'ru') {
                    for (elem of buttonCollection) {
                        if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                            elem.innerHTML = obj[elem.value]["keyRu"];
                        } else  {
                            elem.innerHTML = obj[elem.value]["keyShiftRu"];
                        }    
                    }
                }
            }
        }
    });

    button.addEventListener("mouseup", () => {
        if (button.value === "ShiftLeft" || button.value === "ShiftRight") {
            if (caseType === 'lower') {
                if (sessionStorage.getItem('language') === 'en') {
                    for(elem of buttonCollection) {
                        elem.innerHTML = obj[elem.value]["keyEn"]; 
                    }
                } else if (sessionStorage.getItem('language') === 'ru') {
                    for(elem of buttonCollection) {
                        elem.innerHTML = obj[elem.value]["keyRu"]; 
                    }
                }
            } else if (caseType === 'upper') {
                if (sessionStorage.getItem('language') === 'en') {
                    for (elem of buttonCollection) {
                        if (elem.value.slice(0, 3) === "Key") {
                            elem.innerHTML = obj[elem.value]["keyShiftEn"];
                        } else  {
                            elem.innerHTML = obj[elem.value]["keyEn"];
                        }
                    }
                } else if (sessionStorage.getItem('language') === 'ru') {
                    for (elem of buttonCollection) {
                        if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                            elem.innerHTML = obj[elem.value]["keyShiftRu"];
                        } else  {
                            elem.innerHTML = obj[elem.value]["keyRu"];
                        }    
                    }
                }
            }
        }
    });

    button.addEventListener("click", () => {
                
        if (button.value ==="Backspace") {
            textarea.value = textarea.value.slice(0, -1);
            return true;
        }
        if (button.value ==="Enter") {
            textarea.value += "\n";
            return true;
        }
        if (button.value ==="Tab") {
            textarea.value += "\t";
            return true;
        }

        if (["Ctrl", "Shift", "Alt", "Win"].includes(button.innerHTML)) {
            return true;
        }
        
        if (button.value ==="CapsLock") {
            if (button.classList.value === "") {
                button.classList.add("focus_caps");
            } else if (button.classList.value === "focus_caps") {
                button.classList.remove("focus_caps");
            }
            if (caseType === 'lower') {
                caseType = 'upper';
                if (sessionStorage.getItem('language') === 'en') {
                    for (elem of buttonCollection) {
                        if (elem.value.slice(0, 3) === "Key") {
                            elem.innerHTML = obj[elem.value]["keyShiftEn"];
                        } else  {
                            elem.innerHTML = obj[elem.value]["keyEn"];
                        }
                    }
                } else if (sessionStorage.getItem('language') === 'ru') {
                    for (elem of buttonCollection) {
                        if (elem.value.slice(0, 3) === "Key" || (["BracketLeft", "BracketRight", "Period", "Comma", "Semicolon", "Quote", "Backquote"].includes(elem.value))) {
                            elem.innerHTML = obj[elem.value]["keyShiftRu"];
                        } else  {
                            elem.innerHTML = obj[elem.value]["keyRu"];
                        }    
                    }
                }

            } else if (caseType === 'upper') {
                caseType = 'lower';
                if (sessionStorage.getItem('language') === 'en') {
                    for (elem of buttonCollection) {
                        elem.innerHTML = obj[elem.value]["keyEn"];
                    }
                } else if (sessionStorage.getItem('language') === 'ru') {
                    for (elem of buttonCollection) {
                        elem.innerHTML = obj[elem.value]["keyRu"];
                    }
                }
            }
            return true;
        }
    textarea.value += button.textContent;
    });
});